'use strict';
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self['webpackChunk'] = self['webpackChunk'] || []).push([
    ['update-email-modal'],
    {
        /***/ './App/Containers/UpdateEmailModal/index.js':
            /*!**************************************************!*\
  !*** ./App/Containers/UpdateEmailModal/index.js ***!
  \**************************************************/
            /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
                eval(
                    '__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _update_email_modal_jsx__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./update-email-modal.jsx */ "./App/Containers/UpdateEmailModal/update-email-modal.jsx");\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_update_email_modal_jsx__WEBPACK_IMPORTED_MODULE_0__["default"]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9BcHAvQ29udGFpbmVycy9VcGRhdGVFbWFpbE1vZGFsL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFFQSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL0FwcC9Db250YWluZXJzL1VwZGF0ZUVtYWlsTW9kYWwvaW5kZXguanM/ZWE0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXBkYXRlRW1haWxNb2RhbCBmcm9tICcuL3VwZGF0ZS1lbWFpbC1tb2RhbC5qc3gnO1xuXG5leHBvcnQgZGVmYXVsdCBVcGRhdGVFbWFpbE1vZGFsO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./App/Containers/UpdateEmailModal/index.js\n'
                );

                /***/
            },

        /***/ './App/Containers/UpdateEmailModal/update-email-modal.jsx':
            /*!****************************************************************!*\
  !*** ./App/Containers/UpdateEmailModal/update-email-modal.jsx ***!
  \****************************************************************/
            /***/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
                eval(
                    '__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "../../../node_modules/react/index.js");\n/* harmony import */ var _deriv_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @deriv/components */ "../../components/src/index.ts");\n/* harmony import */ var _deriv_translations__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @deriv/translations */ "../../translations/src/index.js");\n/* harmony import */ var _deriv_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @deriv/shared */ "../../shared/src/index.ts");\n/* harmony import */ var Services__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! Services */ "./Services/index.js");\n/* harmony import */ var _deriv_stores__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @deriv/stores */ "../../../node_modules/mobx-react-lite/es/index.js");\n/* harmony import */ var _deriv_stores__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @deriv/stores */ "../../stores/src/useStore.ts");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react/jsx-runtime */ "../../../node_modules/react/jsx-runtime.js");\n\n\n\n\n\n\n\nconst UpdateEmailModal = (0,_deriv_stores__WEBPACK_IMPORTED_MODULE_6__.observer)(() => {\n  const {\n    ui,\n    client\n  } = (0,_deriv_stores__WEBPACK_IMPORTED_MODULE_7__["default"])();\n  const {\n    logout: logoutClient,\n    is_logged_in\n  } = client;\n  const {\n    is_update_email_modal_visible: is_visible,\n    toggleUpdateEmailModal\n  } = ui;\n  const new_email = client.new_email.system_email_change;\n  const verification_code = client.verification_code.system_email_change;\n  const [is_email_updated, setIsEmailUpdated] = react__WEBPACK_IMPORTED_MODULE_0__.useState(false);\n  const [update_email_error, setUpdateEmailMessage] = react__WEBPACK_IMPORTED_MODULE_0__.useState(null);\n  const onClickButton = () => {\n    toggleUpdateEmailModal(false);\n    (0,_deriv_shared__WEBPACK_IMPORTED_MODULE_3__.removeActionParam)(\'system_email_change\');\n    if (is_logged_in) {\n      logoutClient().then(() => {\n        (0,_deriv_shared__WEBPACK_IMPORTED_MODULE_3__.redirectToLogin)(false, (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_2__.getLanguage)(), false);\n      });\n    } else {\n      (0,_deriv_shared__WEBPACK_IMPORTED_MODULE_3__.redirectToLogin)(false, (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_2__.getLanguage)(), false);\n    }\n  };\n  const api_request = {\n    change_email: \'update\',\n    new_email,\n    verification_code\n  };\n  const sendUpdateEmail = () => {\n    Services__WEBPACK_IMPORTED_MODULE_4__.WS.changeEmail(api_request).then(response => {\n      setIsEmailUpdated(true);\n      if (response.error) {\n        setUpdateEmailMessage(response.error.message);\n        logoutClient();\n      }\n    });\n  };\n  react__WEBPACK_IMPORTED_MODULE_0__.useEffect(() => {\n    if (is_logged_in) {\n      Services__WEBPACK_IMPORTED_MODULE_4__.WS.wait(\'authorize\').then(() => {\n        sendUpdateEmail();\n      });\n      return;\n    }\n    sendUpdateEmail();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_deriv_components__WEBPACK_IMPORTED_MODULE_1__.Modal, {\n    is_open: is_visible,\n    has_close_icon: false,\n    toggleModal: toggleUpdateEmailModal,\n    width: "440px",\n    minHeight: "400px",\n    children: is_email_updated ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)("div", {\n      className: "change-email-update",\n      children: [!update_email_error && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_deriv_components__WEBPACK_IMPORTED_MODULE_1__.Icon, {\n        className: "change-email-update__modal-icon",\n        icon: \'IcEmailVerified\',\n        size: 128\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_deriv_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n        className: "change-email-update__modal-title",\n        weight: "bold",\n        size: "s",\n        children: update_email_error ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_deriv_translations__WEBPACK_IMPORTED_MODULE_2__.Localize, {\n          i18n_default_text: "Failed"\n        }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_deriv_translations__WEBPACK_IMPORTED_MODULE_2__.Localize, {\n          i18n_default_text: "Success!"\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_deriv_components__WEBPACK_IMPORTED_MODULE_1__.Text, {\n        className: "change-email-update__modal-description",\n        size: "xs",\n        children: update_email_error !== null && update_email_error !== void 0 ? update_email_error : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_deriv_translations__WEBPACK_IMPORTED_MODULE_2__.Localize, {\n          i18n_default_text: "Your email address has changed.<0/>Now, log in with your new email address.",\n          components: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("br", {}, 0)]\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_deriv_components__WEBPACK_IMPORTED_MODULE_1__.Modal.Footer, {\n        className: "change-email-update__footer",\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_deriv_components__WEBPACK_IMPORTED_MODULE_1__.Button, {\n          onClick: onClickButton,\n          has_effect: true,\n          text: (0,_deriv_translations__WEBPACK_IMPORTED_MODULE_2__.localize)(\'Log in\'),\n          primary: true,\n          large: true\n        })\n      })]\n    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_deriv_components__WEBPACK_IMPORTED_MODULE_1__.Loading, {\n      is_fullscreen: false\n    })\n  });\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UpdateEmailModal);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9BcHAvQ29udGFpbmVycy9VcGRhdGVFbWFpbE1vZGFsL3VwZGF0ZS1lbWFpbC1tb2RhbC5qc3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUdBO0FBRUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9BcHAvQ29udGFpbmVycy9VcGRhdGVFbWFpbE1vZGFsL3VwZGF0ZS1lbWFpbC1tb2RhbC5qc3g/MDUwMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgQnV0dG9uLCBNb2RhbCwgVGV4dCwgSWNvbiwgTG9hZGluZyB9IGZyb20gJ0BkZXJpdi9jb21wb25lbnRzJztcbmltcG9ydCB7IGxvY2FsaXplLCBMb2NhbGl6ZSwgZ2V0TGFuZ3VhZ2UgfSBmcm9tICdAZGVyaXYvdHJhbnNsYXRpb25zJztcbmltcG9ydCB7IHJlZGlyZWN0VG9Mb2dpbiwgcmVtb3ZlQWN0aW9uUGFyYW0gfSBmcm9tICdAZGVyaXYvc2hhcmVkJztcbmltcG9ydCB7IFdTIH0gZnJvbSAnU2VydmljZXMnO1xuaW1wb3J0IHsgb2JzZXJ2ZXIsIHVzZVN0b3JlIH0gZnJvbSAnQGRlcml2L3N0b3Jlcyc7XG5cbmNvbnN0IFVwZGF0ZUVtYWlsTW9kYWwgPSBvYnNlcnZlcigoKSA9PiB7XG4gICAgY29uc3QgeyB1aSwgY2xpZW50IH0gPSB1c2VTdG9yZSgpO1xuICAgIGNvbnN0IHsgbG9nb3V0OiBsb2dvdXRDbGllbnQsIGlzX2xvZ2dlZF9pbiB9ID0gY2xpZW50O1xuICAgIGNvbnN0IHsgaXNfdXBkYXRlX2VtYWlsX21vZGFsX3Zpc2libGU6IGlzX3Zpc2libGUsIHRvZ2dsZVVwZGF0ZUVtYWlsTW9kYWwgfSA9IHVpO1xuICAgIGNvbnN0IG5ld19lbWFpbCA9IGNsaWVudC5uZXdfZW1haWwuc3lzdGVtX2VtYWlsX2NoYW5nZTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25fY29kZSA9IGNsaWVudC52ZXJpZmljYXRpb25fY29kZS5zeXN0ZW1fZW1haWxfY2hhbmdlO1xuXG4gICAgY29uc3QgW2lzX2VtYWlsX3VwZGF0ZWQsIHNldElzRW1haWxVcGRhdGVkXSA9IFJlYWN0LnVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbdXBkYXRlX2VtYWlsX2Vycm9yLCBzZXRVcGRhdGVFbWFpbE1lc3NhZ2VdID0gUmVhY3QudXNlU3RhdGUobnVsbCk7XG5cbiAgICBjb25zdCBvbkNsaWNrQnV0dG9uID0gKCkgPT4ge1xuICAgICAgICB0b2dnbGVVcGRhdGVFbWFpbE1vZGFsKGZhbHNlKTtcbiAgICAgICAgcmVtb3ZlQWN0aW9uUGFyYW0oJ3N5c3RlbV9lbWFpbF9jaGFuZ2UnKTtcbiAgICAgICAgaWYgKGlzX2xvZ2dlZF9pbikge1xuICAgICAgICAgICAgbG9nb3V0Q2xpZW50KCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVkaXJlY3RUb0xvZ2luKGZhbHNlLCBnZXRMYW5ndWFnZSgpLCBmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlZGlyZWN0VG9Mb2dpbihmYWxzZSwgZ2V0TGFuZ3VhZ2UoKSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0IGFwaV9yZXF1ZXN0ID0ge1xuICAgICAgICBjaGFuZ2VfZW1haWw6ICd1cGRhdGUnLFxuICAgICAgICBuZXdfZW1haWwsXG4gICAgICAgIHZlcmlmaWNhdGlvbl9jb2RlLFxuICAgIH07XG5cbiAgICBjb25zdCBzZW5kVXBkYXRlRW1haWwgPSAoKSA9PiB7XG4gICAgICAgIFdTLmNoYW5nZUVtYWlsKGFwaV9yZXF1ZXN0KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHNldElzRW1haWxVcGRhdGVkKHRydWUpO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgc2V0VXBkYXRlRW1haWxNZXNzYWdlKHJlc3BvbnNlLmVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGxvZ291dENsaWVudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgaWYgKGlzX2xvZ2dlZF9pbikge1xuICAgICAgICAgICAgV1Mud2FpdCgnYXV0aG9yaXplJykudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgc2VuZFVwZGF0ZUVtYWlsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZW5kVXBkYXRlRW1haWwoKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0LWhvb2tzL2V4aGF1c3RpdmUtZGVwc1xuICAgIH0sIFtdKTtcblxuICAgIHJldHVybiAoXG4gICAgICAgIDxNb2RhbFxuICAgICAgICAgICAgaXNfb3Blbj17aXNfdmlzaWJsZX1cbiAgICAgICAgICAgIGhhc19jbG9zZV9pY29uPXtmYWxzZX1cbiAgICAgICAgICAgIHRvZ2dsZU1vZGFsPXt0b2dnbGVVcGRhdGVFbWFpbE1vZGFsfVxuICAgICAgICAgICAgd2lkdGg9JzQ0MHB4J1xuICAgICAgICAgICAgbWluSGVpZ2h0PSc0MDBweCdcbiAgICAgICAgPlxuICAgICAgICAgICAge2lzX2VtYWlsX3VwZGF0ZWQgPyAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NoYW5nZS1lbWFpbC11cGRhdGUnPlxuICAgICAgICAgICAgICAgICAgICB7IXVwZGF0ZV9lbWFpbF9lcnJvciAmJiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8SWNvbiBjbGFzc05hbWU9J2NoYW5nZS1lbWFpbC11cGRhdGVfX21vZGFsLWljb24nIGljb249eydJY0VtYWlsVmVyaWZpZWQnfSBzaXplPXsxMjh9IC8+XG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgIDxUZXh0IGNsYXNzTmFtZT0nY2hhbmdlLWVtYWlsLXVwZGF0ZV9fbW9kYWwtdGl0bGUnIHdlaWdodD0nYm9sZCcgc2l6ZT0ncyc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dXBkYXRlX2VtYWlsX2Vycm9yID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMb2NhbGl6ZSBpMThuX2RlZmF1bHRfdGV4dD0nRmFpbGVkJyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TG9jYWxpemUgaTE4bl9kZWZhdWx0X3RleHQ9J1N1Y2Nlc3MhJyAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgICA8VGV4dCBjbGFzc05hbWU9J2NoYW5nZS1lbWFpbC11cGRhdGVfX21vZGFsLWRlc2NyaXB0aW9uJyBzaXplPSd4cyc+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dXBkYXRlX2VtYWlsX2Vycm9yID8/IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8TG9jYWxpemVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaTE4bl9kZWZhdWx0X3RleHQ9J1lvdXIgZW1haWwgYWRkcmVzcyBoYXMgY2hhbmdlZC48MC8+Tm93LCBsb2cgaW4gd2l0aCB5b3VyIG5ldyBlbWFpbCBhZGRyZXNzLidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50cz17WzxiciBrZXk9ezB9IC8+XX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICAgICA8TW9kYWwuRm9vdGVyIGNsYXNzTmFtZT0nY2hhbmdlLWVtYWlsLXVwZGF0ZV9fZm9vdGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17b25DbGlja0J1dHRvbn0gaGFzX2VmZmVjdCB0ZXh0PXtsb2NhbGl6ZSgnTG9nIGluJyl9IHByaW1hcnkgbGFyZ2UgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9Nb2RhbC5Gb290ZXI+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDxMb2FkaW5nIGlzX2Z1bGxzY3JlZW49e2ZhbHNlfSAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgPC9Nb2RhbD5cbiAgICApO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVwZGF0ZUVtYWlsTW9kYWw7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./App/Containers/UpdateEmailModal/update-email-modal.jsx\n'
                );

                /***/
            },
    },
]);
